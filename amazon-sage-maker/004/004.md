## Amazon SageMaker Data Wrangler（あまぞんせーじめーかーでーたらんぐらー）

クレンジング機能とエンリッチメント機能を使い、欠損値や重複、極端な外れ値を含む複数のデータセットを単一のデータフレームに統合し、機械学習用のデータを効率的に作成できるツール。

複数のデータソースからデータをインポートし、それらを単一のデータフレームに統合するための直感的なインターフェイスを提供します。このツールには、欠損値の補完、重複の削除、極端な外れ値の処理を含むデータクレンジング機能や、データの変換や追加を可能にするエンリッチメント機能が組み込まれている。これにより、ML 用データ準備プロセスを迅速かつ正確に実行できます。

Data Wrangler には組み込みの変換が含まれており、これを使用してコードなしで列を変換できます。

PySpark、Python（ユーザー定義関数）、pandas、および PySpark SQL を使用してカスタム変換を追加することもできます。

一部の変換はその場で動作しますが、他の変換はデータセット内に新しい出力列を作成します。

変換を複数の列に一度に適用できます。たとえば、1 回の手順で複数の列を削除できます。

「数値の処理」および「欠落している変換の処理」は 1 つの列にのみ適用できます。

以下は、クレンジング機能とエンリッチメント機能の意味とその役割についての解説です。

---

### クレンジング機能（データクレンジング）

**意味・目的**

- **データの「汚れ」を取り除く作業**です。
- 現実のデータには、欠損値、重複、不正確な値、極端な外れ値などが含まれていることが多く、これらはデータ分析や機械学習の結果に悪影響を与える可能性があります。

**主な処理内容**

- **欠損値の補完または削除**  
  ⇒ 途中でデータが抜けてしまっている部分を、平均値や中央値、前後のデータなどで埋める、またはその行や列を除外する
- **重複データの削除**  
  ⇒ 同じデータが複数回存在する場合、一部を削除することでデータの重複をなくす
- **極端な外れ値の処理**  
  ⇒ 明らかに誤っている、または例外的な値を検出し、修正や削除をする
- **形式の統一**  
  ⇒ 異なるデータ形式（例えば、日付のフォーマットなど）の統一

**ユースケースの例**

- 例えば、顧客データを使って売上予測を行う際、住所が抜けている顧客データや、同じ顧客が重複して登録されている場合、これらが予測の精度を下げるため、事前にクレンジングしておくことが重要です。

---

### エンリッチメント機能（データエンリッチメント）

**意味・目的**

- **既存のデータに新しい価値や意味を付加する作業**です。
- データを単に「きれいに」するだけでなく、さらに分析に有用な形に変換・拡充することで、ビジネスインサイトを得やすくします。

**主な処理内容**

- **データ変換**  
  ⇒ 数値データのスケーリング、カテゴリデータのラベルエンコーディングなど、機械学習の前処理としてデータの形式を変更する
- **新しい指標や特徴量の作成**  
  ⇒ 複数の列を組み合わせたり計算することで、新たな情報（例えば、売上成長率や季節性の指標など）を作成する
- **外部データとの統合**  
  ⇒ 既存のデータに、天気情報や地理的データ、経済指標など外部の情報を結合し、より複雑で豊かなデータセットにする

**ユースケースの例**

- 顧客の購買データに、年齢層や地域データを結合して顧客セグメントの分析を行ったり、製品の売上データから「月次成長率」や「過去 6 か月の平均売上」などを計算して新たな特徴としてモデルに取り込むことで、予測精度を上げることができます。

---

### まとめ

- **クレンジング機能**は、データのエラーや不整合を取り除いて「正しい」状態にするための機能です。
- **エンリッチメント機能**は、既存のデータに変換や追加処理を行い、「より意味のある」情報や「付加価値」を加えるための機能です。

これらの機能を組み合わせることで、機械学習に使用する前のデータが、より信頼性が高く、分析やモデル構築に適した形に整えられます。
